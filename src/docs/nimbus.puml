@startuml
skinparam classAttributeIconSize 0

class Main {
    - CommandProcessor commandProcessor
    - exitCommand: String
    - inputHandler: InputHandler
    - outputHandler: OutputHandler
    + start(): void
}

class CommandProcessor {
    - CommandFactory commandFactory
    + process(input: String): String
}

interface Command {
    + execute(): String
}

interface ArgumentCommand {
    + withArguments(arguments: String): Command
}

Command <|-- ArgumentCommand
Command <|-- EchoCommand
Command <|-- ExitCommand
Command <|-- ExternalCommand
Command <|-- TypeCommand

class EchoCommand {
    - message: String
    + withArguments(arguments: String): Command
    + execute(): String
}

class ExitCommand {
    + withArguments(arguments: String): Command
    + execute(): String
}

class ExternalCommand {
    - buildCommand(): List<String>
    + withArguments(arguments: String): Command
    + execute(): String
}

class TypeCommand {
    + TypeCommand(commandRegistry: Map<String, Command>)
    + withArguments(arguments: String): Command
    + execute(): String
}

class CommandFactory {
    - Map<String, Command> commandRegistry
    + createCommand(input: String): Command
}

interface InputHandler {
    + readInput(): String
}

class ConsoleInputHandler {
    + readInput(): String
}

InputHandler <|-- ConsoleInputHandler

interface OutputHandler {
    + printOutput(output: String): void
}

class ConsoleOutputHandler {
    + printOutput(output: String): void
}

OutputHandler <|-- ConsoleOutputHandler

class CommandUtils {
    <<static>> + findCommandInPath(): String
    <<static>> + getExecutableExtensions(): List<String>
}

TypeCommand ..> CommandUtils : Uses
ExternalCommand ..> CommandUtils : Uses

Main --> CommandProcessor
CommandProcessor --> CommandFactory
CommandFactory --> Command
Main --> InputHandler
Main --> OutputHandler
@enduml
